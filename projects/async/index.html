<!-- <!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    function loadAndSortTowns() {
      return new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        console.log(xhr);
        xhr.open('GET', 'https://raw.githubusercontent.com/1smelukov/citiesTest/master/cities.json');
        xhr.responseType = 'json';
        xhr.send();
        xhr.addEventListener('load', () => {
          if ((xhr.status < 400) && (xhr.status !== 0)) {
            // setTimeout(() => {
            let sortTowns = xhr.response;
            console.log(sortTowns);
            sortTowns.sort(function (a, b) {
              if (a.name > b.name) {
                return 1;
              }
              if (a.name < b.name) {
                return -1;
              }
              return 0;
            });
            // }, 1000);
            resolve(sortTowns);
            console.log(resolve(sortTowns));
          } else {
            reject() };
        });
        // xhr.addEventListener('error', () => {
        //   let err = xhr.status;
        //   if (err > 400) {
        //     return new Error('error');
        //   }
        //   reject(err)
        //   console.log(reject(err));
        // });

      });
    }
    loadAndSortTowns().then(() => console.log('towns'), () => console.log('error'));


    // function loadAndSortTowns() {
    //   return new Promise(function (resolve, reject) {
    //     throw 
    //     fetch('https://raw.githubusercontent.com/smelukov/citiesTest/master/cities.json')
    //       .then(response => {
    //         return response.json();
    //       })
    //       .then(towns => {
    //         let sortTowns = towns.sort(function (a, b) {
    //           if (a.name > b.name) {
    //             return 1;
    //           }
    //           if (a.name < b.name) {
    //             return -1;
    //           }
    //           return 0;
    //         });
    //         console.log(sortTowns);
    //         resolve(sortTowns);
    //       })
    //       .catch((error) => reject(error));
    //     console.log(reject(error));
    //   })
    // }
  </script>
</body>

</html> -->